<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>xygine: xy::Network::ClientConnection Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">xygine
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">SFML Based 2D Game Creation Framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacexy.html">xy</a></li><li class="navelem"><a class="el" href="namespacexy_1_1_network.html">Network</a></li><li class="navelem"><a class="el" href="classxy_1_1_network_1_1_client_connection.html">ClientConnection</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classxy_1_1_network_1_1_client_connection-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">xy::Network::ClientConnection Class Reference<span class="mlabels"><span class="mlabel">final</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Allows creating a connection to a server application running '<a class="el" href="classxy_1_1_network_1_1_server_connection.html" title="Maintains a group of client connections. The server connection can handle multiple connections from t...">ServerConnection</a>'. The client/server connection is maintained over UDP using challenge/response system to keep it alive. Packets are all ID'd and acknowledged by the remote connections so missing packets may be identified and resent if necessary. Using the Acknowledge ID it is also possible to determine packet order and discard out of date information. Connections allow the provision of custom packet handlers with custom IDs so that they are flexible enough to use in multiple applications, whilst still maintaining reliability.  
 <a href="classxy_1_1_network_1_1_client_connection.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_client_connection_8hpp_source.html">ClientConnection.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:ae192d8668cd4a21fa7d8d5d10d62f24e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae192d8668cd4a21fa7d8d5d10d62f24e"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#ae192d8668cd4a21fa7d8d5d10d62f24e">PacketHandler</a> = std::function&lt; void(PacketType, sf::Packet &amp;, <a class="el" href="classxy_1_1_network_1_1_client_connection.html">ClientConnection</a> *)&gt;</td></tr>
<tr class="memdesc:ae192d8668cd4a21fa7d8d5d10d62f24e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom function for handling packets received by this connection. <br /></td></tr>
<tr class="separator:ae192d8668cd4a21fa7d8d5d10d62f24e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ac4694b5d6a3501a2177daa1751e49add"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac4694b5d6a3501a2177daa1751e49add"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>ClientConnection</b> (const <a class="el" href="classxy_1_1_network_1_1_client_connection.html">ClientConnection</a> &amp;)=delete</td></tr>
<tr class="separator:ac4694b5d6a3501a2177daa1751e49add"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325fe9f91881473e72c005357dd6cfbd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a325fe9f91881473e72c005357dd6cfbd"></a>
<a class="el" href="classxy_1_1_network_1_1_client_connection.html">ClientConnection</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><b>operator=</b> (const <a class="el" href="classxy_1_1_network_1_1_client_connection.html">ClientConnection</a> &amp;)=delete</td></tr>
<tr class="separator:a325fe9f91881473e72c005357dd6cfbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4f8e04fc19787d8b18c25d7262b4451"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#af4f8e04fc19787d8b18c25d7262b4451">connect</a> ()</td></tr>
<tr class="memdesc:af4f8e04fc19787d8b18c25d7262b4451"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempt to connect using the current server settings.  <a href="#af4f8e04fc19787d8b18c25d7262b4451">More...</a><br /></td></tr>
<tr class="separator:af4f8e04fc19787d8b18c25d7262b4451"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c46e8182bafe90df0a711e5b775030d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2c46e8182bafe90df0a711e5b775030d"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#a2c46e8182bafe90df0a711e5b775030d">disconnect</a> ()</td></tr>
<tr class="memdesc:a2c46e8182bafe90df0a711e5b775030d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gracefully disconnects from a server, if it is disconnected, by sending a notification before closing the socket. <br /></td></tr>
<tr class="separator:a2c46e8182bafe90df0a711e5b775030d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a9c12069b7a46639b61a1c75f4923d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#ab1a9c12069b7a46639b61a1c75f4923d">update</a> (float)</td></tr>
<tr class="memdesc:ab1a9c12069b7a46639b61a1c75f4923d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the state of the connection.  <a href="#ab1a9c12069b7a46639b61a1c75f4923d">More...</a><br /></td></tr>
<tr class="separator:ab1a9c12069b7a46639b61a1c75f4923d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0da97c93cc6d174221acb44e115424"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#ace0da97c93cc6d174221acb44e115424">send</a> (sf::Packet &amp;, bool retry=false, sf::Uint8 retryCount=3u)</td></tr>
<tr class="memdesc:ace0da97c93cc6d174221acb44e115424"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a packet of data to the server.  <a href="#ace0da97c93cc6d174221acb44e115424">More...</a><br /></td></tr>
<tr class="separator:ace0da97c93cc6d174221acb44e115424"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae615c316f803e9e9baa7843b7de44ef4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#ae615c316f803e9e9baa7843b7de44ef4">setServerInfo</a> (const sf::IpAddress &amp;, PortNumber)</td></tr>
<tr class="memdesc:ae615c316f803e9e9baa7843b7de44ef4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the server details to attempt to connect to.  <a href="#ae615c316f803e9e9baa7843b7de44ef4">More...</a><br /></td></tr>
<tr class="separator:ae615c316f803e9e9baa7843b7de44ef4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9909688227acde04159b327296fc8ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#af9909688227acde04159b327296fc8ad">setPacketHandler</a> (const <a class="el" href="classxy_1_1_network_1_1_client_connection.html#ae192d8668cd4a21fa7d8d5d10d62f24e">PacketHandler</a> &amp;)</td></tr>
<tr class="memdesc:af9909688227acde04159b327296fc8ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a custom packet handler.  <a href="#af9909688227acde04159b327296fc8ad">More...</a><br /></td></tr>
<tr class="separator:af9909688227acde04159b327296fc8ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cbfe9552a7ec11993efb33ff9cc49f2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2cbfe9552a7ec11993efb33ff9cc49f2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#a2cbfe9552a7ec11993efb33ff9cc49f2">removePacketHandler</a> ()</td></tr>
<tr class="memdesc:a2cbfe9552a7ec11993efb33ff9cc49f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Removes the current packet handler, if it exists. <br /></td></tr>
<tr class="separator:a2cbfe9552a7ec11993efb33ff9cc49f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaff01463666987c149587053b6069c64"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aaff01463666987c149587053b6069c64"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#aaff01463666987c149587053b6069c64">connected</a> () const </td></tr>
<tr class="memdesc:aaff01463666987c149587053b6069c64"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if this connection is connected to a server and is active, else returns false. <br /></td></tr>
<tr class="separator:aaff01463666987c149587053b6069c64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b18068249237cffbe908cf524b5499b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4b18068249237cffbe908cf524b5499b"></a>
ClientID&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#a4b18068249237cffbe908cf524b5499b">getClientID</a> () const </td></tr>
<tr class="memdesc:a4b18068249237cffbe908cf524b5499b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the ClientID of this connection as assigned by the server upon connection. This should be re-aquired if connection is lost and then regained. <br /></td></tr>
<tr class="separator:a4b18068249237cffbe908cf524b5499b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bff95b266dc165cb3a62ede7c2d5345"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9bff95b266dc165cb3a62ede7c2d5345"></a>
float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#a9bff95b266dc165cb3a62ede7c2d5345">getSendRate</a> () const </td></tr>
<tr class="memdesc:a9bff95b266dc165cb3a62ede7c2d5345"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the recommended send rate based on the current connection ping. This optional value is returned by the flow control and returns the recommended send rate to prevent flooding narrow or contended connections. The value is in packets per second (default 30). <br /></td></tr>
<tr class="separator:a9bff95b266dc165cb3a62ede7c2d5345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afaebfac187c84c359befe3ffebce4722"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afaebfac187c84c359befe3ffebce4722"></a>
sf::Mutex &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#afaebfac187c84c359befe3ffebce4722">getMutex</a> ()</td></tr>
<tr class="memdesc:afaebfac187c84c359befe3ffebce4722"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns the mutex belonging to this connection. This should be used to lock the thread when modifying data from the packet handler for example. <br /></td></tr>
<tr class="separator:afaebfac187c84c359befe3ffebce4722"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ba3dacb84c4a0568cf01470f55e55db"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1ba3dacb84c4a0568cf01470f55e55db"></a>
const sf::Time &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classxy_1_1_network_1_1_client_connection.html#a1ba3dacb84c4a0568cf01470f55e55db">getTime</a> () const </td></tr>
<tr class="memdesc:a1ba3dacb84c4a0568cf01470f55e55db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the time elapsed accoring to the server. <br /></td></tr>
<tr class="separator:a1ba3dacb84c4a0568cf01470f55e55db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Allows creating a connection to a server application running '<a class="el" href="classxy_1_1_network_1_1_server_connection.html" title="Maintains a group of client connections. The server connection can handle multiple connections from t...">ServerConnection</a>'. The client/server connection is maintained over UDP using challenge/response system to keep it alive. Packets are all ID'd and acknowledged by the remote connections so missing packets may be identified and resent if necessary. Using the Acknowledge ID it is also possible to determine packet order and discard out of date information. Connections allow the provision of custom packet handlers with custom IDs so that they are flexible enough to use in multiple applications, whilst still maintaining reliability. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="af4f8e04fc19787d8b18c25d7262b4451"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ClientConnection::connect </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Attempt to connect using the current server settings. </p>
<dl class="section return"><dt>Returns</dt><dd>true if successful, else false on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ace0da97c93cc6d174221acb44e115424"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ClientConnection::send </td>
          <td>(</td>
          <td class="paramtype">sf::Packet &amp;&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>retry</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">sf::Uint8&#160;</td>
          <td class="paramname"><em>retryCount</em> = <code>3u</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a packet of data to the server. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">retry</td><td>If true will retry to send the packet if it is not acknowledged by the server. false by default </td></tr>
    <tr><td class="paramname">retryCount</td><td>Number of times to try resending the packet. 3 by default </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="af9909688227acde04159b327296fc8ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientConnection::setPacketHandler </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classxy_1_1_network_1_1_client_connection.html#ae192d8668cd4a21fa7d8d5d10d62f24e">PacketHandler</a> &amp;&#160;</td>
          <td class="paramname"><em>ph</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a custom packet handler. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">PacketHandler</td><td>A std::function used to handle incoming packets received by this connection. Function signature is void(PacketType, sf::Packet&amp;, ClientConnection*) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae615c316f803e9e9baa7843b7de44ef4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientConnection::setServerInfo </td>
          <td>(</td>
          <td class="paramtype">const sf::IpAddress &amp;&#160;</td>
          <td class="paramname"><em>ip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">PortNumber&#160;</td>
          <td class="paramname"><em>port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the server details to attempt to connect to. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sf::IpAddress</td><td>Address of server to connect to </td></tr>
    <tr><td class="paramname">PortNumber</td><td>Port number of server to attempt to connect to </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ab1a9c12069b7a46639b61a1c75f4923d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ClientConnection::update </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>dt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Updates the state of the connection. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">float</td><td>The delta time (in seconds) since the last update) </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
